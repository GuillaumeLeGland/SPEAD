%function [Xave,tave] = dailyAverages(X,dt)
% Correct the function name to fit the file name (Le Gland, 21/07/2020)
function [Xave,tave] = jamstecrest_dailyAve(X,dt)

%========================================================================
%........................................................................
[msize,nsize] = size(X);
%........................................................................
window = 1/dt; %one points per day.
%........................................................................
%========================================================================
%........................................................................
%Xave = [];
%stdX = [];
jspan = 1:window:nsize;
%........................................................................
% for j = jspan
%    J = j:j+(window-1);
%    Xj = X(:,J);
%    Xavej = mean(Xj,2);
%    Xave  = [Xave,Xavej]; %OUTPUT.
% end
%........................................................................
% I think this a more efficient wat to compute (Le Gland, 21/07/2020)
tsize = nsize*dt; % Size of the new time axis
Xave = zeros(msize,tsize);
% for j = 1:tsize
%   J = window*(j-1)+1:window*j;
%   Xj = X(:,J);
%   Xave(:,j) = mean(Xj,2);
% end
% Divide time by more than 100 !!! (but to be checked in MATLAB with real data)
for j = 0:window-1 
  Xave = Xave + X(:,jspan+j)*dt;
end 
%Xave = (X(:,jspan) + X(:,jspan+1) + X(:,jspan+2) + X(:,jspan+3))/4;

%........................................................................
%========================================================================

%%%%%%%%%%%%%
%TIME OUTPUT:
%%%%%%%%%%%%%
%========================================================================
%........................................................................
t0 = 1*dt; %t0 = dt
tmax = nsize*dt; %tmax = 360
dtave = window*dt;
tave = t0:dtave:tmax;
%........................................................................
%========================================================================
%************************************************************************
return

